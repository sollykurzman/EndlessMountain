"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var fs = require("fs-extra");
var FileUtils = /** @class */ (function () {
    function FileUtils() {
    }
    FileUtils.isOutputFileOlderThenInputFiles = function (outputFile, inputFiles) {
        if (inputFiles.then) {
            return inputFiles
                .then(function (inputFilesResolved) {
                return FileUtils.isOutputFileOlderThenInputFiles(outputFile, inputFilesResolved);
            });
        }
        return fs.pathExists(outputFile)
            .then(function (exists) {
            if (!exists) {
                return true;
            }
            var tasks = [
                fs.stat(outputFile)
            ];
            if (typeof inputFiles === 'string') {
                inputFiles = [inputFiles];
            }
            for (var _i = 0, _a = inputFiles; _i < _a.length; _i++) {
                var inputFile = _a[_i];
                tasks.push(fs.stat(inputFile));
            }
            return Promise.all(tasks).then(function (results) {
                var outputFileMTime = results[0].mtimeMs;
                var maxInputFileMTime = results.slice(1).reduce(function (max, inStat) {
                    return Math.max(max, inStat.mtimeMs);
                }, 0);
                return maxInputFileMTime === 0 ? true : maxInputFileMTime > outputFileMTime;
            });
        });
    };
    return FileUtils;
}());
exports.FileUtils = FileUtils;
//# sourceMappingURL=FileUtils.js.map